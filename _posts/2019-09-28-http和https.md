---
layout: post
title: 计算机网络知识之 HTTP 和 HTTPS
lag: http

---

* TOC
{:toc}

# HTTP

## 概述

HTTP（HyperText Transfer Protocol）即超文本传输协议，一般情况下，由 HTTP 客户端发起一个请求，创建一个到服务器指定端口（默认是 80 端口）的 TCP 连接。HTTP 服务器则在那个端口监听客户端的请求。一旦收到请求，服务器会向客户端返回一个状态，比如 "HTTP/1.1 200 OK"，以及返回的内容，如请求的文件、错误消息、或者其它信息。HTTP 是万维网的数据通信的基础。

## 请求方法

HTTP/1.1协议中共定义了八种方法（Method）来以不同方式操作指定的资源，它们分别是 `GET` `HEAD` `POST` `PUT` `DELETE` 以及 `TRACE` `OPTIONS` `CONNECT`，其中常用的方法是前五种。

* `GET`：用来读取数据；
* `HEAD`：功能和 `GET` 类似，不同之处在于使用 `HEAD` 方法时，服务器将不传回资源的本文部分。它的好处在于，使用这个方法可以在不必传输全部内容的情况下，就可以获取其中“关于该资源的信息”（元信息或称元数据）；
* `POST`：用来提交数据，请求服务器进行处理（例如提交表单或者上传文件）。这个请求可能会创建新的资源或修改现有资源，或二者皆有；
* `PUT`：用来更新数据；
* `DELETE`：用来删除资源或数据；
* `TRACE`：回显服务器收到的请求，主要用于测试或诊断。
* `OPTIONS`：这个方法可使服务器传回该资源所支持的所有HTTP请求方法。用'*'来代替资源名称，向Web服务器发送OPTIONS请求，可以测试服务器功能是否正常运作。
* `CONNECT`：HTTP/1.1协议中预留给能够将连接改为管道方式的代理服务器。通常用于SSL加密服务器的链接（经由非加密的HTTP代理服务器）。

## 状态码

状态代码的第一个数字代表当前响应的类型：

- 1xx消息——请求已被服务器接收，继续处理
- 2xx成功——请求已成功被服务器接收、理解、并接受
- 3xx重定向——需要后续操作才能完成这一请求
- 4xx请求错误——请求含有词法错误或者无法被执行
- 5xx服务器错误——服务器在处理某个正确请求时发生错误

## 持久链接

在HTTP 0.9和1.0中，TCP连线在每一次请求/回应对之后关闭。在HTTP 1.1中，引入了保持连线的机制，一个连接可以重复在多个请求/回应使用。持续连线的方式可以大大减少等待时间，因为在发出第一个请求后，双方不需要重新运行TCP握手程序。

下图展示了使用多个连接和使用持久链接的对比：

![使用多个连接和使用持久链接的对比](/assets/img/http和https/HTTP_persistent_connection.png)

# HTTPS

## 概念

HTTPS（HyperText Transfer Protocol Secure）即超文本传输安全协议，是一种通过计算机网络进行安全通信的传输协议。它的主要作用是在不安全的网络上创建一个安全信道，并可在使用适当的加密包和服务器证书可被验证且可被信任时，对窃听和中间人攻击提供合理的防护。

简单的说，HTTPS 比 HTTP 多了一层 SSL/TLS 加密，传输的内容经过了对称加密，使之能比 HTTP 传输更加安全。

![HTTPS和HTTP的对比](/assets/img/http和https/https.png)

## 与HTTP的差异

* HTTP 的 UR L是由 http:// 起始与默认使用端口 80，而 HTTPS 的 URL 则是由 "https://" 起始与默认使用端口 443；
* HTTP 不是安全的，而且攻击者可以通过监听和中间人攻击等手段，获取网站帐户和敏感信息等。HTTPS 的设计可以防止前述攻击，在正确配置时是安全的。

## SSL/TLS 的工作原理

SSL/TLS 的功能实现主要依赖于三类基本算法：散列（Hash）函数、对称加密和非对称加密，其利用非对称加密实现身份认证和密钥协商，对称加密算法采用协商的密钥对数据加密，基于散列函数验证信息的完整性。

![TLS/SSL加密方法](/assets/img/http和https/TLS_SSL加密方法.png)

![TLS/SSL加密交互](/assets/img/http和https/TLS_SSL加密交互.png)

## 隐患

HTTPS 是安全的，但不是绝对安全的。在某些情形中，被加密资源的URL可仅通过截获请求和响应的大小推得，这就可使攻击者同时知道明文（公开的静态内容）和密文（被加密过的明文），从而使选择密文攻击成为可能。

# 参考链接

* [超文本传输协议-维基百科](https://zh.wikipedia.org/wiki/超文本传输协议)
* [HTTP和HTTPS详解-jackyshan_](https://juejin.im/post/5af557a3f265da0b9265a498)
* [HTTP和HTTPS详解。-SnailClimb](https://juejin.im/post/5a030e326fb9a0450a66c8ea)
